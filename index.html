<!DOCTYPE html>
<html>
<head>
	<title>Adjusted XKCD Now -> Here</title>
    <script type="text/javascript">
        document.write("\<script src='https://code.jquery.com/jquery-latest.min.js' type='text/javascript'>\<\/script>");
    </script>

	<script>

		function updateRotation(){
			var date = new Date();
			var hour = date.getHours();

			var offsetHour = 12-(hour+((date.getMinutes()+1)/60));

			var offsetDeg = 15*offsetHour;

			//$('#img').css('-webkit-transform','rotate('+offsetDeg+'deg)');
			$('#img').attr('src','http://c.xkcd.com/redirect/comic/now?'+date.getTime());
			$('#img').css('-webkit-transform','rotate('+offsetDeg+'deg)');
			
			console.log('Rotating by '+offsetDeg+' degrees!');
		}

		$.ready(init());

		function init(){
			updateRotation;
			var timer = setInterval(updateRotation,5000);
		}

	</script>
</head>
<body>

<div class="imgDiv">
	<img src="http://c.xkcd.com/redirect/comic/now" id="img"/>
</div>

</body>
</html>
